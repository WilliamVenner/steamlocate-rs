[package]
name = "steamlocate"
version = "2.0.0-alpha.1"
authors = ["William Venner <william@venner.io>"]
edition = "2018"
repository = "https://github.com/WilliamVenner/steamlocate-rs"
license = "MIT"
description = "Rust Crate for locating Steam game installation directories (and Steam itself!)"
readme = "README.md"
keywords = ["steam", "vdf", "appmanifest", "directory", "steamapps"]
categories = ["os", "hardware-support", "filesystem", "accessibility"]

[package.metadata.docs.rs]
all-features = true
rustdoc-args = ["--cfg", "docsrs", "--cfg", "steamlocate_doctest"]

# TODO: test more features in CI

[features]
default = ["locate"]
locate = ["locate_backend"]
shortcuts_extras = ["crc"]

[dependencies]
keyvalues-parser = "0.2"
keyvalues-serde = "0.2"
serde = { version = "1.0", features = ["derive"] }

# TODO: is this really worth making optional? It should be a really small dep
crc = { version = "3.0", optional = true }

# Custom cfg used to enable a dependency only needed for doctests
[target."cfg(steamlocate_doctest)".dependencies]
tempfile = "3.8.1"

# Platform-specific dependencies used for locating the steam dir
[target."cfg(target_os=\"windows\")".dependencies]
locate_backend = { package = "winreg", version = "0.51", optional = true }
[target."cfg(not(target_os=\"windows\"))".dependencies]
locate_backend = { package = "dirs", version = "5", optional = true }

[dev-dependencies]
insta = { version = "1.34.0", features = ["ron"] }
tempfile = "3.8.1"
